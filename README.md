# üçå Minion - iiko Automation Tool

**BELLO!** –ú–∏–Ω–∏–æ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å iiko API. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è API –∫–ª—é—á–µ–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –º–µ–Ω—é.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üîë –ü—Ä–æ–¥–ª–µ–Ω–∏–µ API –∫–ª—é—á–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è API –∫–ª—é—á–µ–π
- **üçΩÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- **üìä –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **‚öôÔ∏è –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
minion/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ minion/          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ internal/            # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ client/          # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è iiko API
‚îÇ   ‚îú‚îÄ‚îÄ commands/        # CLI –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ models/          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ config.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
‚îú‚îÄ‚îÄ Makefile            # –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ go.mod              # Go –º–æ–¥—É–ª—å
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd minion

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make deps

# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make build
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –æ–±—Ä–∞–∑–µ—Ü `config.json`:

```json
{
  "extension_years": 2,
  "restaurants": [
    {
      "name": "–ö–∞–∑–±–µ–∫ –ë–æ–∫–µ–π—Ö–∞–Ω–∞",
      "base_url": "https://kazbek-bokeihana.iikoweb.ru",
      "login": "2020",
      "password": "2020",
      "enabled": true
    }
  ]
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ü—Ä–æ–¥–ª–µ–Ω–∏–µ API –∫–ª—é—á–µ–π
```bash
# –ß–µ—Ä–µ–∑ Make
make run-extend

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
./build/minion extend-keys
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é
```bash
# –ß–µ—Ä–µ–∑ Make
make run-refresh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
./build/minion refresh-menus
```

#### –°–ø—Ä–∞–≤–∫–∞
```bash
./build/minion --help
./build/minion extend-keys --help
./build/minion refresh-menus --help
```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make help

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make fmt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make vet

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make test

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –ø—Ä–æ–≤–µ—Ä–∫–∞ + —Ç–µ—Å—Ç—ã)
make check

# –°–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev-build

# –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏
make clean

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ GOPATH/bin
make install
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞

- **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ (–¥–ª—è –ª–æ–≥–æ–≤)
- **base_url** - –±–∞–∑–æ–≤—ã–π URL iiko —Å–∏—Å—Ç–µ–º—ã
- **login** - –ª–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞
- **password** - –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞
- **enabled** - –≤–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- **extension_years** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ—Ç –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è API –∫–ª—é—á–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2)

## üîß API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ iiko:

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ

### API –∫–ª—é—á–∏
- `GET /api/integration-management/api-logins/get-all` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ API –∫–ª—é—á–µ–π
- `POST /api/integration-management/api-logins/get` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π API –∫–ª—é—á–∞
- `POST /api/integration-management/save-api-login` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ API –∫–ª—é—á–∞

### –í–Ω–µ—à–Ω–∏–µ –º–µ–Ω—é
- `GET /api/external-menu` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –º–µ–Ω—é
- `POST /api/external-menu/refresh-menu/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ–Ω—é

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```bash
üçå BELLO! –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–ª–µ–Ω–∏—è API –∫–ª—é—á–µ–π...

üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞: –ö–∞–∑–±–µ–∫ –ë–æ–∫–µ–π—Ö–∞–Ω–∞
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!
üìã –ù–∞–π–¥–µ–Ω–æ 2 API –ª–æ–≥–∏–Ω–æ–≤
üîç –û–±—Ä–∞–±–æ—Ç–∫–∞ API –ª–æ–≥–∏–Ω–∞: Test API Key
üìÖ –¢–µ–∫—É—â–∏–π —Å—Ä–æ–∫: 2024-06-15 10:30:00.000
üìÖ –ù–æ–≤—ã–π —Å—Ä–æ–∫: 2026-01-15 10:30:00.000
‚úÖ API –ª–æ–≥–∏–Ω Test API Key —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!
üéâ GELATO! –†–µ—Å—Ç–æ—Ä–∞–Ω –ö–∞–∑–±–µ–∫ –ë–æ–∫–µ–π—Ö–∞–Ω–∞: –æ–±–Ω–æ–≤–ª–µ–Ω–æ 1 –∫–ª—é—á–µ–π

==================================================
üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
==================================================
‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤: 1
‚ùå –û—à–∏–±–æ–∫: 0
üîÑ –í—Å–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ API –∫–ª—é—á–µ–π: 1

üçå BANANA! –í—Å–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã! üéâ
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Go:

- **`cmd/`** - —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **`internal/`** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏–∑–≤–Ω–µ
- **`internal/models/`** - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **`internal/client/`** - HTTP –∫–ª–∏–µ–Ω—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ API
- **`internal/commands/`** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è CLI –∫–æ–º–∞–Ω–¥
- **`internal/config/`** - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go test -v -cover ./...

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
go test -v ./internal/client/
```

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –≤ `internal/commands/`
2. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ `cmd/minion/main.go`
3. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API –º–µ—Ç–æ–¥–∞

1. –î–æ–±–∞–≤—å—Ç–µ –º–æ–¥–µ–ª–∏ –≤ `internal/models/`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ –≤ `internal/client/`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö

## üìù Changelog

### v1.0.0
- ‚ú® –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ Go best practices
- ‚ú® –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏: client, config, models, commands
- ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Makefile –¥–ª—è —É–¥–æ–±–Ω–æ–π —Å–±–æ—Ä–∫–∏
- ‚ú® CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Cobra
- ‚ú® –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è API –∫–ª—é—á–µ–π
- ‚ú® –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –º–µ–Ω—é
- ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üôã‚Äç‚ôÇÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

**üçå POOPAYE!** –°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –º–∏–Ω—å–æ–Ω–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á!